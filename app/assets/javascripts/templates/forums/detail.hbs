<div class="main-page-header header-with-controls">
  <span class="controls">
    {{#if role_tho}}
      <button class="btn {{if sticky 'hidden' ''}}" {{action 'toggle_sticky'}}>Sticky Thread</button>
      <button class="btn {{if sticky '' 'hidden'}}" {{action 'toggle_sticky'}}>Unsticky Thread</button>
    {{/if}}
    {{#if role_moderator}}
      <button class="btn" {{action 'delete_thread'}}>Delete Thread</button>
    {{/if}}
    {{#if model.has_prev_page}}
      <button class="btn" {{action 'prev_page'}}>Older</button>
    {{/if}}
    {{#if model.has_next_page}}
      <button class="btn" {{action 'next_page'}}>Newer</button>
    {{/if}}
  </span>
  <div class="title">{{#link-to 'forums' }}Forums{{/link-to}} > {{model.forum.subject}}
    <button class="btn btn-link" {{action 'reload'}}><span class="glyphicon glyphicon-repeat" title="Refresh"></span></button>
  </div>
</div>

<div class="display_card">
  {{#each post in model.forum.posts}}
    {{render "forums.post_partial" post}}
  {{/each}}

</div>

<div class="display_card {{if logged_in '' 'hidden'}} {{if has_next_page 'hidden'}} {{if has_new_posts '' 'scroll_to'}}">
  <div class="card-section">
    <span class="title big-title">Post a message</span>
    {{textarea value=model.new_post rows='3' class='input' key-down='handleKeyDown'}}
    <ul class="errors-list">
      {{#each error in model.errors}}
        <li>{{error}}</li>
      {{/each}}
    </ul>
    {{partial 'upload'}}
    <span class="controls">
      <button class="btn" {{action 'new'}}>Post</button>
    </span>
  </div>
</div>

<div class="footer-controls {{if has_new_posts '' 'scroll_to'}}">
  <div class="card-section">
    {{#if has_prev_page}}
      <button class="controls btn" {{action 'prev_page'}}>Older</button>
    {{/if}}
    {{#if has_next_page}}
      <button class="controls btn" {{action 'next_page'}}>Newer</button>
    {{/if}}
  </div>
</div>
